version: "3.8"

services:
    api:
        build: .
        container_name: backend-api
        restart: unless-stopped # ถ้า server ดับ หรือ container พัง มันจะเปิดตัวเองใหม่
        ports:
            - "5000:8080" # Map Port 5000 ของเครื่อง Host เข้าหา 8080 ของ Container
        env_file:
            - .env # อ่านค่า config จากไฟล์ .env ที่วางอยู่ข้างๆ ไฟล์ compose
        volumes:
            # ใช้ Bind Mount เพื่อให้ไฟล์ที่ User อัปโหลด เซฟลงมาที่เครื่อง Host โดยตรง
            # เวลามีปัญหา หรืออยาก Backup จะได้หาง่ายๆ
            - ./uploads:/app/uploads

# ไม่ต้องประกาศ volumes: ด้านล่างแล้ว เพราะเราใช้ Bind mount (./uploads)
